on:
  push:
    branches:
      - main

jobs:
  release-please:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
      contents: write
    steps:
      - uses: google-github-actions/release-please-action@v4
        with:
          release-type: simple
          token: ${{ secrets.GITHUB_TOKEN }}

  # dummy
  # build:
  #   name: Build docker image
  #   runs-on: ubuntu-latest
  #   permissions:
  #     contents: read
  #     packages: write
  #   steps:
  #     - name: Checkout
  #       uses: actions/checkout@v2
  #     - name: Create env file
  #       run: |
  #         touch .env
  #         echo "${{ secrets.ENV_PROD }}" > .env
  #         cat .env
  #     - name: login
  #       run: |
  #         echo ${{ secrets.GITHUB_TOKEN }} | docker login ghcr.io -u ${{ github.actor }} --password-stdin
  #     - name: Build and Publish
  #       run: |
  #         docker compose build
  #         docker compose push

  # deploy:
  #   runs-on: ubuntu-latest
  #   needs: build
  #   steps:
  #     - name: Deploy
  #       uses: appleboy/ssh-action@master
  #       with:
  #         username: ${{ secrets.SSH_USERNAME }}
  #         host: ${{ secrets.SSH_HOST }}
  #         password: ${{ secrets.SSH_PASSWORD }}
  #         script: "cd ${{ secrets.SSH_WORKDIR }} && docker compose pull && docker compose up -d"
